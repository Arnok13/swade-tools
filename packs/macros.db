{"name":"Attack","permission":{"default":0,"lUyIFoEURZA7o1zQ":3},"type":"script","flags":{"core":{"sourceId":"Macro.ZX5N6znOIlQ4Sxlf"}},"scope":"global","command":"/// Macro to start attack sequence - shows quick list of weapons/powers for actor and roll main skill\n\nlet actor=canvas.tokens.controlled[0]?.actor\n\nif (!actor){\n    ui.notifications.warn(game.i18n.localize('SWADETOOLS.NoActorFound'));\n    \n} else {\nlet buttons={}\n\nlet items=actor.items.filter(el=>(el.type==\"power\" || el.type==\"weapon\") && el.data.data.equipped===true);\n\nitems.map((item)=>{\n    buttons[item.id]={\n        label: item.name,\n        callback: ()=>{\n            game.swade.swadetoolsAttack(actor,item)\n            \n        }\n    }\n})\n\nnew Dialog({\n    title: actor.name+': '+game.i18n.localize(\"SWADE.QuickAccess\"),\n    content: ``,\n    buttons: buttons,\nclasses: 'horizontal-dialog'\n},{classes:[\"vertical-buttons\"]}).render(true);\n\n}","author":"lUyIFoEURZA7o1zQ","img":"modules/swade-tools/icons/macro-attack.png","actorIds":[],"_id":"N1L4QwaYJjRFaQb9"}
{"$$deleted":true,"_id":"N1L4QwaYJjRFaQb9"}
{"name":"Attack","permission":{"default":0,"lUyIFoEURZA7o1zQ":3},"type":"script","flags":{"core":{"sourceId":"Macro.ZX5N6znOIlQ4Sxlf"}},"scope":"global","command":"/// Macro to start attack sequence - shows quick list of weapons/powers for actor and roll main skill\nlet actor=canvas.tokens.controlled[0]?.actor\n\nif (!actor){\n    ui.notifications.warn(game.i18n.localize('SWADETOOLS.NoActorFound'));\n    \n} else {\n\n    let items=actor.items.filter(el=>(el.type==\"power\" || el.type==\"weapon\") && el.data.data.equipped===true);\n\n    if (!items.length){\n\n        ui.notifications.warn(game.i18n.localize('SWADETOOLS.NoItemEquipped'));\n    } else {\nlet buttons={}\n\nlet content=`<label style=\"font-size:14px;display:flex;align-items:center;margin-bottom: 5px;\"><input type=\"checkbox\" style=\"margin:0;vertical-align:middle;margin-right: 3px;\" id=\"showmore\"/> ${game.i18n.localize('SWADETOOLS.ShowDialogCheck')}</label>`\n\n\n\nitems.map((item)=>{\n    buttons[item.id]={\n        label: item.name,\n        callback: (html)=>{\n            let dialog=false;\n            if (html.find(\"#showmore\")[0].checked){\n                dialog=true;\n            } \n            game.swade.swadetoolsAttack(actor,item,dialog)\n            \n        }\n    }\n})\n\nnew Dialog({\n    title: actor.name+': '+game.i18n.localize(\"SWADE.QuickAccess\"),\n    content: content,\n    buttons: buttons,\nclasses: 'horizontal-dialog'\n},{classes:[\"vertical-buttons\"]}).render(true);\n    }\n}","author":"lUyIFoEURZA7o1zQ","img":"modules/swade-tools/icons/macro-attack.png","actorIds":[],"_id":"eYQOyUVzPFEh0Qe5"}
